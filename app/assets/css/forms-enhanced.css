/**
 * Formulaires Améliorés
 * Améliorations avancées pour les formulaires
 */

/* ============================================
   Form Layout
   ============================================ */

.form-enhanced {
  max-width: 600px;
  margin: 0 auto;
}

.form-group-enhanced {
  margin-bottom: var(--ds-spacing-6);
}

.form-label-enhanced {
  display: block;
  font-weight: var(--ds-font-weight-semibold);
  color: var(--ds-text);
  margin-bottom: var(--ds-spacing-2);
  font-size: var(--ds-font-size-sm);
}

.form-label-enhanced.required::after {
  content: ' *';
  color: var(--ds-error);
  font-weight: var(--ds-font-weight-bold);
}

/* ============================================
   Input Styles
   ============================================ */

.form-input-enhanced,
.form-textarea-enhanced,
.form-select-enhanced {
  width: 100%;
  padding: var(--ds-spacing-4);
  background: var(--ds-bg);
  border: 2px solid var(--ds-border);
  border-radius: var(--ds-radius-lg);
  font-size: var(--ds-font-size-base);
  color: var(--ds-text);
  transition: all var(--ds-transition-base);
  font-family: inherit;
}

.form-input-enhanced:focus,
.form-textarea-enhanced:focus,
.form-select-enhanced:focus {
  outline: none;
  border-color: var(--ds-primary);
  box-shadow: 0 0 0 3px var(--ds-primary-lighter);
}

.form-input-enhanced:disabled,
.form-textarea-enhanced:disabled,
.form-select-enhanced:disabled {
  background: var(--ds-bg-secondary);
  color: var(--ds-text-muted);
  cursor: not-allowed;
  opacity: 0.6;
}

.form-textarea-enhanced {
  min-height: 120px;
  resize: vertical;
}

/* ============================================
   Input Groups
   ============================================ */

.input-group-enhanced {
  display: flex;
  align-items: stretch;
  gap: var(--ds-spacing-2);
}

.input-group-enhanced .form-input-enhanced {
  flex: 1;
}

.input-group-enhanced-prepend,
.input-group-enhanced-append {
  display: flex;
  align-items: center;
  padding: var(--ds-spacing-4);
  background: var(--ds-bg-secondary);
  border: 2px solid var(--ds-border);
  border-radius: var(--ds-radius-lg);
  color: var(--ds-text-secondary);
}

.input-group-enhanced-prepend {
  border-right: none;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

.input-group-enhanced-append {
  border-left: none;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.input-group-enhanced .form-input-enhanced:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.input-group-enhanced .form-input-enhanced:last-child {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

/* ============================================
   Checkbox & Radio Enhanced
   ============================================ */

.checkbox-enhanced,
.radio-enhanced {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: var(--ds-spacing-3);
  cursor: pointer;
  user-select: none;
}

.checkbox-enhanced input[type="checkbox"],
.radio-enhanced input[type="radio"] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.checkbox-enhanced-custom,
.radio-enhanced-custom {
  width: 20px;
  height: 20px;
  border: 2px solid var(--ds-border);
  border-radius: var(--ds-radius-sm);
  background: var(--ds-bg);
  transition: all var(--ds-transition-base);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.radio-enhanced-custom {
  border-radius: var(--ds-radius-full);
}

.checkbox-enhanced input[type="checkbox"]:checked ~ .checkbox-enhanced-custom,
.radio-enhanced input[type="radio"]:checked ~ .radio-enhanced-custom {
  background: var(--ds-primary);
  border-color: var(--ds-primary);
}

.checkbox-enhanced input[type="checkbox"]:checked ~ .checkbox-enhanced-custom::after {
  content: '✓';
  color: white;
  font-weight: var(--ds-font-weight-bold);
  font-size: var(--ds-font-size-sm);
}

.radio-enhanced input[type="radio"]:checked ~ .radio-enhanced-custom::after {
  content: '';
  width: 10px;
  height: 10px;
  border-radius: var(--ds-radius-full);
  background: white;
}

.checkbox-enhanced input[type="checkbox"]:focus ~ .checkbox-enhanced-custom,
.radio-enhanced input[type="radio"]:focus ~ .radio-enhanced-custom {
  box-shadow: 0 0 0 3px var(--ds-primary-lighter);
}

.checkbox-enhanced-label,
.radio-enhanced-label {
  color: var(--ds-text);
  font-size: var(--ds-font-size-base);
}

/* ============================================
   File Upload Enhanced
   ============================================ */

.file-upload-enhanced {
  position: relative;
  display: inline-block;
  width: 100%;
}

.file-upload-enhanced-input {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.file-upload-enhanced-label {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--ds-spacing-3);
  padding: var(--ds-spacing-6);
  background: var(--ds-bg-secondary);
  border: 2px dashed var(--ds-border);
  border-radius: var(--ds-radius-lg);
  cursor: pointer;
  transition: all var(--ds-transition-base);
  text-align: center;
}

.file-upload-enhanced-label:hover {
  border-color: var(--ds-primary);
  background: var(--ds-primary-lighter);
}

.file-upload-enhanced-label.has-file {
  border-style: solid;
  border-color: var(--ds-success);
  background: var(--ds-success-lighter);
}

.file-upload-enhanced-filename {
  margin-top: var(--ds-spacing-2);
  font-size: var(--ds-font-size-sm);
  color: var(--ds-text-secondary);
}

/* ============================================
   Form Validation
   ============================================ */

.form-feedback {
  display: block;
  margin-top: var(--ds-spacing-2);
  font-size: var(--ds-font-size-sm);
}

.form-feedback.error {
  color: var(--ds-error);
  display: flex;
  align-items: center;
  gap: var(--ds-spacing-2);
}

.form-feedback.error::before {
  content: '⚠️';
}

.form-feedback.success {
  color: var(--ds-success);
  display: flex;
  align-items: center;
  gap: var(--ds-spacing-2);
}

.form-feedback.success::before {
  content: '✓';
}

.form-input-enhanced.error,
.form-textarea-enhanced.error,
.form-select-enhanced.error {
  border-color: var(--ds-error);
}

.form-input-enhanced.success,
.form-textarea-enhanced.success,
.form-select-enhanced.success {
  border-color: var(--ds-success);
}

/* ============================================
   Form Steps (Multi-step Forms)
   ============================================ */

.form-steps {
  display: flex;
  justify-content: space-between;
  margin-bottom: var(--ds-spacing-8);
  position: relative;
}

.form-steps::before {
  content: '';
  position: absolute;
  top: 20px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--ds-border);
  z-index: 0;
}

.form-step {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--ds-spacing-2);
  flex: 1;
}

.form-step-circle {
  width: 40px;
  height: 40px;
  border-radius: var(--ds-radius-full);
  background: var(--ds-bg);
  border: 2px solid var(--ds-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--ds-font-weight-semibold);
  color: var(--ds-text-secondary);
  transition: all var(--ds-transition-base);
}

.form-step.active .form-step-circle {
  background: var(--ds-primary);
  border-color: var(--ds-primary);
  color: white;
}

.form-step.completed .form-step-circle {
  background: var(--ds-success);
  border-color: var(--ds-success);
  color: white;
}

.form-step.completed .form-step-circle::after {
  content: '✓';
}

.form-step-label {
  font-size: var(--ds-font-size-xs);
  color: var(--ds-text-secondary);
  text-align: center;
}

.form-step.active .form-step-label {
  color: var(--ds-primary);
  font-weight: var(--ds-font-weight-semibold);
}

.form-step-content {
  display: none;
}

.form-step-content.active {
  display: block;
}

/* ============================================
   Form Actions
   ============================================ */

.form-actions {
  display: flex;
  gap: var(--ds-spacing-4);
  margin-top: var(--ds-spacing-8);
  justify-content: flex-end;
}

.form-actions-left {
  justify-content: flex-start;
}

.form-actions-center {
  justify-content: center;
}

.form-actions-space-between {
  justify-content: space-between;
}

/* ============================================
   Loading States
   ============================================ */

.form-submit-loading {
  position: relative;
  pointer-events: none;
  opacity: 0.7;
}

.form-submit-loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid var(--ds-primary);
  border-top-color: transparent;
  border-radius: var(--ds-radius-full);
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* ============================================
   Responsive
   ============================================ */

@media (max-width: 768px) {
  .form-enhanced {
    max-width: 100%;
    padding: 0 var(--ds-spacing-4);
  }
  
  .input-group-enhanced {
    flex-direction: column;
  }
  
  .input-group-enhanced-prepend,
  .input-group-enhanced-append {
    border-radius: var(--ds-radius-lg);
    border: 2px solid var(--ds-border);
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .form-steps {
    flex-wrap: wrap;
  }
  
  .form-step {
    min-width: 80px;
  }
}

/* ============================================
   Print
   ============================================ */

@media print {
  .form-actions,
  .form-submit-loading::after {
    display: none;
  }
  
  .form-input-enhanced,
  .form-textarea-enhanced,
  .form-select-enhanced {
    border: 1px solid #000;
    background: white;
  }
}
