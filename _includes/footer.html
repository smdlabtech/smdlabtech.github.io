<footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      {% include social-networks-links.html %}
      {% if page.footer-extra %}
        <div class="footer-custom-content">
          {% for file in page.footer-extra %}
            {% include {{ file }} %}
          {% endfor %}
        </div>
      {% endif %}
      <p class="copyright text-muted">
      {% if site.author %}
        {{ site.author }}
        &nbsp;&bull;&nbsp;
      {% endif %}
      {{ site.time | date: '%Y' }}

      {% if site.url-pretty %}
        &nbsp;&bull;&nbsp;
        <span class="author-site">
          <a href="{% if site.url-canonical %}{{ site.url-canonical }}{% else %}{{ '/' | absolute_url }}{% endif %}">{{ site.url-pretty }}</a>
        </span>
      {% endif %}

      {% if site.matomo %}
        {% if site.matomo.opt-out %}
          &nbsp;&bull;&nbsp;
          <a href="http://{{- site.matomo.uri -}}/index.php?module=CoreAdminHome&action=optOut" target="_blank" class="text_muted">Do-not-Track</a>
        {% endif %}
      {% endif%}

      {% if site.edit_page_button and site.github.repository_url %}
        &nbsp;&bull;&nbsp;
        <a title="Edit this page on GitHub" href="{{ site.github.repository_url }}/edit/{{ site.github.source.branch }}/{{ page.path }}" class="text_muted">Edit page</a>
       {% endif%}

      </p>
      {% unless site.remove-ads %}<p class="theme-by text-muted">
        Powered by
        <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
      </p>{% endunless %}
      </div>
    </div>
  </div>
</footer>

<script src="/assets/js/theme-toggle.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const body = document.body;
  const darkBtn = document.getElementById('toggle-dark');
  const widthBtn = document.getElementById('toggle-width');

  // Sécurité : vérifier que les boutons existent
  if (darkBtn) {
    function setTheme(theme) {
      if (theme === 'dark') {
        body.classList.add('dark-mode');
      } else {
        body.classList.remove('dark-mode');
      }
      localStorage.setItem('theme', theme);
    }
    darkBtn.onclick = function () {
      const theme = body.classList.contains('dark-mode') ? 'light' : 'dark';
      setTheme(theme);
    };
    setTheme(localStorage.getItem('theme') || 'light');
  }

  if (widthBtn) {
    function setWidth(mode) {
      if (mode === 'wide') {
        body.classList.add('layout-wide');
        body.classList.remove('layout-centered');
      } else {
        body.classList.remove('layout-wide');
        body.classList.add('layout-centered');
      }
      localStorage.setItem('layout', mode);
    }
    widthBtn.onclick = function () {
      const mode = body.classList.contains('layout-wide') ? 'centered' : 'wide';
      setWidth(mode);
    };
    setWidth(localStorage.getItem('layout') || 'centered');
  }
});
</script>
